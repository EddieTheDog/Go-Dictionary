<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#4CAF50">
<title>Go Dictionary</title>
<style>
  html, body { margin:0; padding:0; height:100%; width:100%; overflow:hidden; }
  iframe { border:none; width:100%; height:100%; }
</style>
</head>
<body>
  <div id="container"></div>

  <!-- Socket.io CDN (updated: removed integrity) -->
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>

  <!-- Client command listener -->
  <script src="client-command.js"></script>

  <!-- Main script -->
  <script>
  document.addEventListener('DOMContentLoaded', () => {
      function getDeviceType() {
          const ua = navigator.userAgent || navigator.vendor || window.opera;
          if (/(Macintosh;.*Mac OS X.*Version\/[\d\.]+.*Mobile)/.test(ua)) return 'ios';
          if (/iPad/.test(ua)) return 'ios';
          if (/iPhone|iPod/.test(ua)) return 'ios';
          if (/Android/.test(ua)) return 'android';
          return 'desktop';
      }

      function isStandalone() {
          return (window.matchMedia('(display-mode: standalone)').matches) || window.navigator.standalone === true;
      }

      const deviceType = getDeviceType();
      const standalone = isStandalone();
      const container = document.getElementById('container');

      if (deviceType === 'desktop') {
          container.innerHTML = `
            <div style="display:flex; justify-content:center; align-items:center; height:100vh; text-align:center; font-family:Arial, sans-serif; background:#4CAF50; color:white;">
              <p style="font-size:1.5em;">Go Dictionary is only available on mobile devices or iPad. Please open this site on your phone or tablet.</p>
            </div>`;
      } else if (standalone) {
          const iframe = document.createElement('iframe');
          iframe.src = 'app.html';
          container.appendChild(iframe);
      } else {
          const iframe = document.createElement('iframe');
          iframe.src = 'instructions.html';
          container.appendChild(iframe);
      }
  });
  </script>
</body>
</html>
